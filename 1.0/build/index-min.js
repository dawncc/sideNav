/*!build time : 2013-10-21 7:42:15 PM*/
KISSY.add("gallery/sideNav/1.0/mods/tool",function(a){function b(a){var b=document.createElement("div"),c="Khtml Ms O Moz Webkit".split(" "),d=c.length;if(a in b.style)return!0;for(a=a.replace(/^[a-z]/,function(a){return a.toUpperCase()});d--;)if(c[d]+a in b.style)return!0;return!1}function c(){return d("html").hasClass(".ks-ie6")}var d=a.Node.all,e={isIE6:c(),isSupportTransition:b("transition"),isSupportTransform:b("transform"),isSupportFilter:b("filter"),transition:function(a,b,c){var d=a+" "+b/1e3+"s "+c;return{"-webkit-transition":d,"-moz-transition":d,"-o-transition":d,transition:d}},transform:function(a){return{"-webkit-transform":a,"-moz-transform":a,"-o-transform":a,transform:a}},filter:function(a){return{"-webkit-filter":a,"-moz-filter":a,"-o-filter":a,filter:a}},scrollTo:function(a,b,c,e,f){var g=d(a);g.length&&(e?g.animate({scrollLeft:b,scrollTop:c},e/1e3,f):g.scrollTo(b,c))}};return e}),KISSY.add("gallery/sideNav/1.0/mods/fade",function(a,b,c,d,e){b.all;var f={opacity:"0",display:"block"},g={display:"none"},h={opacity:"1"},i={opacity:"0"},j={reset:function(b){var c=b.cfg;e.isSupportTransition?(b.navNode.css(f),a.later(function(){var a=e.transition("all",c.duration,c.easing);b.navNode.css(a)},50)):b.navNode.css(g)},show:function(a){var b=a.cfg;e.isSupportTransition?a.navNode.css(h):a.navNode.fadeIn(b.duration/1e3,null,b.easing)},hide:function(a){var b=a.cfg;e.isSupportTransition?a.navNode.css(i):a.navNode.fadeOut(b.duration/1e3,null,b.easing)}};return j},{requires:["node","anim","base","./tool"]}),KISSY.add("gallery/sideNav/1.0/mods/zoom",function(a,b,c,d,e){b.all;var f=a.merge(e.transform("scale(0)"),{display:"block"}),g={width:"0",height:"0",overflow:"hidden",display:"block"},h=e.transform("scale(1)"),i=e.transform("scale(0)"),j={reset:function(b){var c=b.cfg;e.isSupportTransform&&e.isSupportTransition?(b.navNode.css(f),a.later(function(){var a=e.transition("all",c.duration,c.easing);b.navNode.css(a)},50)):b.navNode.css(g)},show:function(a){var b=a.cfg;e.isSupportTransform&&e.isSupportTransition?a.navNode.css(h):a.navNode.animate({width:a.navWidth,height:a.navHeight},b.duration/1e3,b.easing)},hide:function(a){var b=a.cfg;e.isSupportTransform&&e.isSupportTransition?a.navNode.css(i):a.navNode.animate({width:0,height:0},b.duration/1e3,b.easing)}};return j},{requires:["node","anim","base","./tool"]}),KISSY.add("gallery/sideNav/1.0/mods/rotate",function(a,b,c,d,e){b.all;var f=a.merge(e.transform("scale(0) rotate(-270deg)"),{display:"block"}),g={width:"0",height:"0",overflow:"hidden",display:"block"},h=e.transform("scale(1) rotate(0)"),i=e.transform("scale(0) rotate(-270deg)"),j={reset:function(b){var c=b.cfg;e.isSupportTransform&&e.isSupportTransition?(b.navNode.css(f),a.later(function(){var a=e.transition("all",c.duration,c.easing);b.navNode.css(a)},50)):b.navNode.css(g)},show:function(a){var b=a.cfg;e.isSupportTransform&&e.isSupportTransition?a.navNode.css(h):a.navNode.animate({width:a.navWidth,height:a.navHeight},b.duration/1e3,b.easing)},hide:function(a){var b=a.cfg;e.isSupportTransform&&e.isSupportTransition?a.navNode.css(i):a.navNode.animate({width:0,height:0},b.duration/1e3,b.easing)}};return j},{requires:["node","anim","base","./tool"]}),KISSY.add("gallery/sideNav/1.0/mods/blur",function(a,b,c,d,e){b.all;var f=a.merge(e.filter("blur(5px)"),{opacity:"0",display:"block"}),g={display:"none"},h=a.merge(e.filter("blur(0)"),{opacity:"1"}),i=a.merge(e.filter("blur(5px)"),{opacity:"0"}),j={reset:function(b){var c=b.cfg;e.isSupportFilter&&e.isSupportTransition?(b.rootNode.css({overflow:"hidden",width:b.navWidth+10,height:b.navHeight+10}),b.navNode.css(f),a.later(function(){var a=e.transition("all",c.duration,c.easing);b.navNode.css(a)},50)):b.navNode.css(g)},show:function(a){var b=a.cfg;e.isSupportFilter&&e.isSupportTransition?a.navNode.css(h):a.navNode.fadeIn(b.duration/1e3,null,b.easing)},hide:function(a){var b=a.cfg;e.isSupportFilter&&e.isSupportTransition?a.navNode.css(i):a.navNode.fadeOut(b.duration/1e3,null,b.easing)}};return j},{requires:["node","anim","base","./tool"]}),KISSY.add("gallery/sideNav/1.0/mods/blink",function(a,b,c,d,e){b.all;var f=a.merge(e.transform("scale(1.2)"),{opacity:"0",display:"block"}),g={display:"none"},h=a.merge(e.transform("scale(1)"),{opacity:"1"}),i=a.merge(e.transform("scale(1.2)"),{opacity:"0"}),j={reset:function(b){var c=b.cfg;e.isSupportTransform&&e.isSupportTransition?(b.navNode.css(f),a.later(function(){var a=e.transition("all",c.duration,c.easing);b.navNode.css(a)},50)):b.navNode.css(g)},show:function(a){var b=a.cfg;e.isSupportTransform&&e.isSupportTransition?a.navNode.css(h):a.navNode.fadeIn(b.duration/1e3,null,b.easing)},hide:function(a){var b=a.cfg;e.isSupportTransform&&e.isSupportTransition?a.navNode.css(i):a.navNode.fadeOut(b.duration/1e3,null,b.easing)}};return j},{requires:["node","anim","base","./tool"]}),KISSY.add("gallery/sideNav/1.0/index",function(a,b,c,d,e,f,g,h,i,j){function k(b){var c=this;return this instanceof k?(c.cfg=a.merge({},m,b),c.init(),k.superclass.constructor.call(c,b),void 0):new k(b)}var l=b.all,m={node:"",effect:"zoom",easing:"ease",duration:300,when:{type:1,top:300,node:"",delay:3e3},top:{node:"",easing:"ease",duration:300},map:{enable:!1,easing:"ease",duration:300,curPannelCls:"sn-cur-pannel",curNavCls:"sn-cur-nav",rule:{"":""}}};return a.extend(k,d,{_checkParam:function(){var b=this,c=b.cfg,d=!0,e=["fade","zoom","rotate","blur","blink","slideDown","slideUp","slideLeft","slideRight"],f=["linear","ease","ease-in","ease-out","ease-in-out"];return l(c.node).length||(d=!1,a.log("can't find node.")),a.inArray(c.effect,e)||(c.effect="zoom"),a.inArray(c.easing,f)||(c.easing="ease"),2!=c.when.type||l(c.when.node).length||(d=!1,a.log("can't find when node.")),a.isNumber(c.when.top)||(c.when.top=300),a.isNumber(c.when.delay)||(c.when.delay=3e3),a.inArray(c.top.easing,f)||(c.top.easing="ease"),l(c.top.node).length||a.log("can't find top node."),a.isNumber(c.top.duration)||(c.top.duration=300),a.inArray(c.map.easing,f)||(c.map.easing="ease"),a.isNumber(c.map.duration)||(c.map.duration=300),c.map.curNavCls||(c.map.curNavCls="sn-cur-nav"),c.map.curPannelCls||(c.map.curPannelCls="sn-cur-pannel"),d},_initCxt:function(){var b=this,c=b.cfg;b.rootNode=l(c.node),b.navHeight=b.rootNode.height(),b.navWidth=b.rootNode.width();var d='<div class="sn-nav-wrapper"></div>';b.rootNode.wrapInner(d),b.navNode=b.rootNode.one(".sn-nav-wrapper"),b.navNode.css({position:"absolute",left:"0",right:"0",top:"0",bottom:"0",margin:"auto",display:"none",width:b.navWidth,height:b.navHeight}),b.rootNode.css({display:"block",overflow:"visible",width:b.navWidth,height:b.navHeight}),b.whenNode=l(c.when.node),b.topNode=l(c.top.node),c.map.enable&&(b.navNodes=new a.NodeList,b.pannelNodes=new a.NodeList,b.pannelTopArr=[],b.pannelHeightArr=[],a.each(c.map.rule,function(a,c){var d=l(c),e=l(a);d.length&&e.length&&(b.navNodes=b.navNodes.add(d),b.pannelNodes=b.pannelNodes.add(e),b.pannelTopArr.push(e.offset().top),b.pannelHeightArr.push(e.outerHeight()))})),b.anim=b._getAnimObj()},_scrollCallBack:function(){var b=this,c=b.cfg,d=0,e=document.body.scrollTop||document.documentElement&&document.documentElement.scrollTop;if(1==c.when.type&&(d=c.when.top),2==c.when.type&&(d=b.whenNode.offset().top-l(window).height()),e>=d?b.show():b.hide(),c.map.enable){var f=999999,g=0,h=0,i=0;a.each(b.pannelTopArr,function(a,b){var c=e-a;c>=0&&Math.abs(c)<=f&&(f=Math.abs(c),g=b),a>=h&&(h=a,i=b)});var j=b.pannelHeightArr[i]+b.pannelTopArr[i];l("."+c.map.curNavCls).removeClass(c.map.curNavCls),l("."+c.map.curPannelCls).removeClass(c.map.curPannelCls),j>e&&(b.navNodes.item(g).addClass(c.map.curNavCls),b.pannelNodes.item(g).addClass(c.map.curPannelCls))}return!0},_addEvent:function(){var b=this,c=b.cfg,d=a.buffer(b._scrollCallBack,100,this);l(window).on("load",function(){b._scrollCallBack()}).on("scroll resize",function(){d()}),b.topNode.length&&b.topNode.on("click",function(a){a.preventDefault(),j.scrollTo(window,0,0,c.top.duration,c.top.easing)}),c.map.enable&&b.navNodes.on("click",function(a){a.preventDefault();var d=l(this),e=b.navNodes.index(d),f=b.pannelNodes.item(e),g=b.pannelTopArr[e];j.scrollTo(window,0,g,c.map.duration,c.map.easing),l("."+c.map.curNavCls).removeClass(c.map.curNavCls),l("."+c.map.curPannelCls).removeClass(c.map.curPannelCls),d.addClass(c.map.curNavCls),f.addClass(c.map.curPannelCls)})},_when:function(){var b=this,c=b.cfg;3==c.when.type&&a.later(b.show,c.when.delay,!1,b)},stopAnim:function(a){c.stop(a,!0)},_getAnimObj:function(){var a=this,b=a.cfg,c=e;return c="fade"==b.effect?e:"zoom"==b.effect?f:"rotate"==b.effect?g:"blur"==b.effect?h:"blink"==b.effect?i:e,j.isIE6&&(c=e),c},_resetStyle:function(){var a=this;a.cfg,a.anim.reset(a)},show:function(){var a=this;a.cfg,a.stopAnim(a.navNode),a.anim.show(a)},hide:function(){var a=this;a.cfg,a.stopAnim(a.navNode),a.anim.hide(a)},init:function(){var a=this;return a._checkParam()?(a._initCxt(),a._when(),a._resetStyle(),a._addEvent(),void 0):!1}},{ATTRS:{}}),k},{requires:["node","anim","base","./mods/fade","./mods/zoom","./mods/rotate","./mods/blur","./mods/blink","./mods/tool"]});